@model TechiesWeb.TeamBins.ViewModels.AddTeamMemberRequestVM
@{
Layout=null;
}
@using(Html.BeginForm("Add","Users"))
{       
<div class="modal-dialog">
    <div class="modal-content" style="width:500px;">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="myModalLabel">Add Member</h4>
        </div>
        <div class="modal-body">
            <div id="msg" style="display:none;"></div>            
                <table class="tblform sleek modelTblFull">
                <tr>
                    <th>Email Address</th>
                </tr>
                <tr>
                    <td>@Html.TextBoxFor(x=>x.EmailAddress)</td>
                </tr>               
                </table>
                @Html.HiddenFor(x=>x.TeamID)            
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <button type="button" id="btnAddMember" class="btn btn-primary">Save</button>
        </div>  
    </div>
</div>
}
<style>
   

.ui-autocomplete {

  z-index: 1051 !important;
  
}

</style>
<script type="text/javascript">
    $(function () {       

        $("#EmailAddress").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: "../../Team/NonTeamMembers",
                    data: { term: request.term, issueId: 1 },
                    success: function (data) {
                        response($.map(data, function (item) {
                            return { label: item.Name, value: item.MemberID, Image: item.AvatarHash };
                        }))
                    }
                })
            },
            create: function () {
                $(this).data('ui-autocomplete')._renderItem = function (ul, item) {
                    return $('<li>')
                        .append("<a><div class='autocomplete-item'><img src='" + item.Image + "?size=28' />" + item.label + "</div></a>")
                        .appendTo(ul);
                };
            },
            focus: function (event, ui) {
                $("#EmailAddress").val(ui.item.label);
            },
            select: function (event, ui) {
                $("#EmailAddress").val(ui.item.label);
                $.post(addMemberToIssueUrl, { memberId: ui.item.value, issueId: $("#ID").val() }, function (res) {
                    if (res.Status === "success") {

                    }
                });
                return false;
            }
        });
    });
</script>